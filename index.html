<!doctype html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">

<link rel="stylesheet" href="https://unpkg.com/prism-themes@1.4.0/themes/prism-base16-ateliersulphurpool.light.css">

<script src="https://unpkg.com/prismjs@1.23.0"></script>
<script src="prism-hyperscript.js"></script>

<pre><code class="lang-hyperscript">on mousedown(clientX, clientY)
	call event.preventDefault()

	log "drag start"

	measure my x, y
	set xoff to clientX - x
	set yoff to clientY - y

	transition margin-top to '-10px'
	           box-shadow to '8px 8px 2px 1px rgba(0, 0, 0, .2)'
	           over 50ms

	repeat until event mouseup from document
		wait for mousemove(pageX, pageY) or
			mouseup(pageX, pageY) from document
		add { left: `${pageX - xoff}px`, top: `${pageY - yoff}px` }
	end

	transition margin-top to 0
	           box-shadow to '0 0 0 0'
	           over 50ms</code></pre>
